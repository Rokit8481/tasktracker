{% load static %}
<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Мій сайт{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="{% static "css/style.css" %}" rel="stylesheet">

</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-app py-2 px-4">
    <a class="navbar-brand fw-bold" href="{% url 'main' %}">
      <i class="bi bi-house-door-fill"></i>&nbsp;Головна
    </a>

    <ul class="navbar-nav ms-3">
      <li class="nav-item">
        <a class="nav-link" style="color: #ffffff;" href="{% url 'dashboard_list' %}">
          <i class="bi bi-kanban-fill"></i>&nbsp;Мої Дошки
        </a>
      </li>
    </ul>

    <div class="ms-auto d-flex align-items-center">
      {% if user.is_authenticated %}
        {% if dashboard %}
          <div class="nav-left-muted d-none d-md-block">Поточна дошка:</div>
          <div class="nav-left-muted d-none d-md-block me-3 fw-semibold">{{ dashboard.title }}</div>
        {% else %}
          <div class="nav-left-muted d-none d-md-block me-3">{{ request.user.username }}</div>
        {% endif %}
        <form method="post" action="{% url 'logout' %}" class="d-inline me-2">
          {% csrf_token %}
          <button type="submit" class="btn btn-outline-light nav-btn">
            <i class="bi bi-box-arrow-right"></i>&nbsp;Вийти
          </button>
        </form>
      {% else %}
        <a href="{% url 'login' %}" class="btn btn-outline-light nav-btn me-2">
          <i class="bi bi-door-open"></i>&nbsp;Увійти
        </a>
        <a href="{% url 'register' %}" class="btn btn-primary nav-btn"
           style="background:linear-gradient(90deg,var(--accent-1),var(--accent-2)); border:none;">
          <i class="bi bi-person-plus"></i>&nbsp;Реєстрація
        </a>
      {% endif %}
    </div>
  </nav>

  <main class="app-shell">
    {% block content %}{% endblock %}
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  {% block extra_js %}
  <script>
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.delete-form').forEach(function(form){
      form.addEventListener('submit', function(e){
        if (!confirm('Підтвердити видалення? Цю операцію не можна відмінити.')) {
          e.preventDefault();
        }
      });
    });
  });</script>
  {% endblock %}
</body>
</html>
