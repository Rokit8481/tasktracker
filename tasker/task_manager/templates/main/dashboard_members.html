{% extends "base.html" %}
{% block title %}Учасники дошки {{ dashboard.title }}{% endblock %}

{% block content %}
<div class="app-shell">
  <h3 class="fw-bold mb-3">Учасники дошки "{{ dashboard.title }}"</h3>

  <ul class="list-group mb-4">
    <li class="list-group-item bg-dark text-light">
      <strong>Автор:</strong> {{ dashboard.created_by.username }}
    </li>
    {% for member in members %}
      <li class="list-group-item bg-dark text-light d-flex justify-content-between align-items-center">
        {{ member.username }}
        <form method="post" action="{% url 'dashboard_member_delete' dashboard_pk=dashboard.pk user_pk=member.pk %}">
          {% csrf_token %}
          <button type="submit" class="btn btn-sm btn-outline-danger">
            <i class="bi bi-x-lg"></i> Видалити
          </button>
        </form>        
      </li>
    {% empty %}
      <li class="list-group-item bg-dark text-light">Поки немає учасників</li>
    {% endfor %}
  </ul>

  <h5>Додати учасника</h5>
  <form method="post" class="d-flex flex-column gap-2 mt-3">
    {% csrf_token %}
  
    {{ form.username }}
  
    {% if form.username.errors %}
      <div class="text-danger small mt-1">
        {% for error in form.username.errors %}
          {{ error }}
        {% endfor %}
      </div>
    {% endif %}
  
    {% if form.non_field_errors %}
      <div class="text-danger small mt-1">
        {% for error in form.non_field_errors %}
          {{ error }}
        {% endfor %}
      </div>
    {% endif %}
  
    <button type="submit" class="btn btn-filter mt-2">Додати</button>
  </form>
  

  <a href="{% url 'dashboard_detail' dashboard_pk=dashboard.pk %}" class="btn btn-outline-light mt-3">← Назад до дошки</a>
</div>
{% endblock %}
